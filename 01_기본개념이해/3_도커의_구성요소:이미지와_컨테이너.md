## 이미지란

 도커에서 이미지(Image)는 컨테이너(Container)를 실행하기 위한 템플릿으로 애플리케이션과 그 실행 환경(운영 체제, 라이브러리, 의존성 등)을 하나로 묶어 패키징한 **정적인 파일**이다. 때문에 쉽게 컨테이너를 만드는 빵틀, 설계도로 많이 비유한다. 

### 도커 이미지의 특징

1. **불변성**
    - 도커 이미지는 불변(Immutable) 상태
    - 이미지를 수정할 수 없으며, 변경이 필요하면 새로운 이미지를 생성해야 함
2. **계층 구조**
    - 도커 이미지는 여러 **레이어(layer)**로 구성
    - 각 레이어는 변경 사항(예: 파일 추가, 업데이트)을 나타내며, 이전 레이어 위에 쌓이는 구조
    - 레이어 기반 구조는 이미지를 효율적으로 관리하고, 저장 공간을 절약하며, 빠른 빌드를 가능하게 함
3. **경량성**
    - 필요한 요소(운영 체제, 라이브러리 등)만 포함하여 경량화
    - 기본 이미지는 보통 몇 MB에서 시작.

### 도커 이미지의 구성요소

1. **Base Image(기본 이미지)**
    - 모든 이미지는 기본 이미지를 기반으로 빌드
    - 기본 이미지는 특정 운영 체제를 포함하며, 다른 이미지의 부모 역할을 함
    - 예: **`ubuntu:latest`**, **`alpine:latest`**.
2. **명령어 및 설정**
    - 이미지에는 애플리케이션 실행을 위한 명령어와 설정이 포함
    - 예: 환경 변수, 실행 명령, 파일 복사 등.
3. **애플리케이션 코드**
    - 애플리케이션 코드와 의존성(라이브러리, 패키지 등)이 이미지에 포함

## 컨테이너란

 컨테이너(Container)는 이미지(Image)의 실행 가능한 인스턴스입니다. 쉽게 말해, 컨테이너는 애플리케이션과 그 실행 환경(운영 체제, 라이브러리, 코드 등)을 격리된 상태에서 실행하는 가벼운 가상 환경입니다.

컨테이너는 이미지를 기반으로 생성되며, 실행 중 필요한 추가 작업은 컨테이너 내부에서 처리됩니다.

### 컨테이너의 특징

1. **경량화**
    - 컨테이너는 **운영 체제를 공유**하기 때문에 가상머신보다 훨씬 가벼움
    - 애플리케이션과 필요한 파일, 라이브러리만 포함하므로 시작 시간이 짧고 자원 소모가 적음
2. **독립성**
    - 각 컨테이너는 **독립된 환경**에서 실행
    - 컨테이너 간에 파일 시스템, 네트워크 등이 격리되어 서로 영향을 주지 않음
3. **일관성**
    - 동일한 이미지로 생성된 컨테이너는 어디서 실행하든 동일하게 동작
    - 개발 환경, 테스트 환경, 프로덕션 환경 간의 차이를 줄이는 데 유용
4. **휘발성**
    - 컨테이너 내부에서 발생한 변경 사항은 컨테이너가 종료되면 휘발됨(필요 시 데이터를 외부 볼륨에 저장 가능).

### 컨테이너의 구성요소

1. **파일 시스템**
    - 컨테이너는 이미지로부터 복사된 읽기 전용 파일 시스템을 가지고 시작
    - 컨테이너 내부에서 변경된 데이터는 **쓰기 가능한 레이어**에 저장
2. **네트워크**
    - 컨테이너는 기본적으로 격리된 네트워크 환경에서 실행
    - 필요 시 컨테이너 간 네트워크 연결을 설정하거나 외부 네트워크와 연결 가능.
3. **자원 관리**
    - CPU, 메모리, 디스크 등의 자원을 격리된 상태로 관리
    - 특정 컨테이너에 자원 제한을 설정할 수도 있음
4. **프로세스**
    - 컨테이너 내부에서 실행되는 애플리케이션은 호스트 운영 체제의 프로세스로 동작.
    - 그러나 컨테이너 외부에서는 격리된 프로세스처럼 보임

## 이미지와 컨테이너의 관계

1. **이미지는 정적, 컨테이너는 동적**
    - 이미지는 파일 시스템과 소프트웨어를 포함한 상태로 고정
    - 컨테이너는 이미지를 실행하여 동적으로 작동하며, 내부에서 데이터를 추가하거나 수정할 수 있음.
2. **이미지는 컨테이너의 시작점**
    - 컨테이너는 항상 이미지를 기반으로 생성
    - 컨테이너를 생성할 때, 도커는 해당 이미지를 읽어 실행 환경을 설정하고, 컨테이너를 시작
3. **컨테이너는 이미지의 실행 인스턴스**
    - 하나의 이미지에서 여러 개의 컨테이너를 생성할 수 있음
    - 예:
        - **`ubuntu:20.04`** 이미지를 기반으로 3개의 컨테이너를 실행하면, 각 컨테이너는 독립적으로 작동하지만 동일한 환경을 공유.
4. **이미지 = 읽기 전용, 컨테이너 = 읽기 + 쓰기**
    - 이미지는 **읽기 전용** 파일 시스템을 제공
    - 컨테이너는 이미지 위에 **쓰기 가능한 레이어**를 추가하여 실행 중 데이터를 저장하거나 변경할 수 있음
5. **컨테이너로 이미지를 만들 수 있음**
    - 컨테이너의 변경사항을 저장하여 그를 바탕으로 새 이미지를 만들 수 있음.